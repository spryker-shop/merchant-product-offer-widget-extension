{% extends model('component') %}

{% define config = {
    name: 'drop-down-list',
    tag: 'drop-down-list',
} %}

{% define data = {
    listItems: required,
    showItems: 3,
    isOpen: false,
} %}

{% define attributes = {
    'list-trigger-class': 'is-hidden',
    'button-trigger-class': config.name ~ '__button--shown',
} %}

{% macro listItem(label, value) %}
    <div class="col col--sm-5">
        <strong>{{ label }}:</strong>
    </div>
    <div class="col col--sm-7 spacing-left spacing-left--inner">{{ value }}</div>
{% endmacro %}

{% block body %}
    <div class="grid grid--middle">
        {% for key, value in data.listItems %}
            {% if loop.index <= data.showItems %}
                {% block shownListItems %}
                    {{ _self.listItem(key, value) }}
                {% endblock %}
            {% else %}
                {% if loop.index is same as(data.showItems + 1) %}
                    <div class="grid grid--middle {{ config.jsName }}__list {% if not data.isOpen %}is-hidden{% endif %}">
                {% endif %}
                    {% block hiddenListItems %}
                        {{ _self.listItem(key, value) }}
                    {% endblock %}
                {% if loop.last %}
                    </div>
                    <div class="col col--sm-12">
                        {% block triggerButton %}
                            <span class="{{ config.name }}__button {{ config.jsName }}__button {% if data.isOpen %}{{ config.name }}__button--shown{% endif %} link">
                            <span class="{{ config.name }}__show-text">
                                {{ 'global.show' | trans }}
                            </span>
                            <span class="{{ config.name }}__hide-text">
                                {{ 'global.show' | trans }}
                            </span>
                        </span>
                        {% endblock %}
                    </div>
                {% endif %}
            {% endif %}
        {% endfor %}
    </div>
{% endblock %}
