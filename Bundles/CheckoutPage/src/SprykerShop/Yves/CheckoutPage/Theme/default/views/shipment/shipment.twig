{% extends template('page-layout-checkout', 'CheckoutPage') %}

{% define data = {
    backUrl: _view.previousStepUrl,
    forms: {
        shipment: _view.shipmentForm
    },

    title: 'checkout.step.shipment.title' | trans
} %}

{% block content %}
    {% embed molecule('form') with {
        class: 'box',
        data: {
            form: data.forms.shipment,
            options: {
                attr: {
                    id: 'payment-form'
                }
            },
            submit: {
                enable: true,
                text: 'general.next.button' | trans
            },
            cancel: {
                enable: true,
                url: data.backUrl,
                text: 'general.back.button' | trans
            }
        }
    } only %}
        {% block fields %}
            {% for name, choices in data.form.idShipmentMethod.vars.choices %}
                <div class="form__field col col--sm-12">
                    <h5>{{name}}</h5>
                    <ul class="list spacing-y">
                        {% for key, choice in choices %}
                            <li class="list__item spacing-y">
                                {{ form_row(data.form.idShipmentMethod[key], {
                                    label: data.form.idShipmentMethod[key].vars.label,
                                    required: false
                                }) }}
                            </li>
                        {% endfor %}
                    </ul>
                </div>
                {% if not loop.last %}<div class="form__field col col--sm-12"><hr class="box__separator"></div>{% endif %}
            {% endfor %}
        {% endblock %}
    {% endembed %}
{% endblock %}
